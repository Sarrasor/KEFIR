<!DOCTYPE html>
<html>
	<head>
		<style>
			body{
				margin:0;
			}
			#canvas{
				width:640px;
				height:360px;
				background: #000;
			}
		</style>
	</head>

	<body>
		<div style="border-radius: 50px; width: 640px; height: 360px; overflow: hidden;"> 
			<canvas id="fog_canvas" width="640" height="360"></canvas>
		</div>
	</body>
</html>

<script type="text/javascript">
	
var canvas = document.getElementById("fog_canvas");
var ctx = canvas.getContext("2d");

function draw()
{
	ctx.clearRect(0, 0, canvas.width, canvas.height);

	ctx.beginPath();
	ctx.rect(0, 0, canvas.width, canvas.height);
	ctx.fillStyle = "#000000";
	ctx.fill();

    var offset = 5;

 //    // Draw dot
	// ctx.fillStyle = "#FFFFFF";
	// ctx.beginPath();
 //    ctx.arc(Mouse.x, Mouse.y, offset+10, 0, 2*Math.PI, false);
 //    ctx.fill();

    var from = Math.max(Mouse.x - offset, 0);
    var to = Math.min(Mouse.x + offset, canvas.width);

    console.log(from, to);

	ctx.strokeStyle = "#00ff00";
	for(var i = from; i < to-1; i++)
	{
		ctx.beginPath();
		ctx.moveTo(i, points[i]);
		ctx.lineTo(i+1, points[i+1]);
		ctx.stroke();
	}

	// Draw dot
	ctx.fillStyle = "#42f5bc";
	ctx.beginPath();
    ctx.arc(Mouse.x, Mouse.y, 4, 0, 2*Math.PI, false);
    ctx.fill();
}

var points = 
[
109, 108, 107, 106, 105, 104, 103, 102, 101, 101, 100, 99, 99, 98, 98, 98, 97,
97,97, 98, 98, 98, 99, 99, 100, 101, 103, 104, 107, 112, 123, 199, 204, 207, 210,
212, 213, 214, 216, 216, 217, 217, 218, 218, 218, 218, 218, 218, 217, 216, 215, 214, 212,
210, 208, 206, 204, 201, 199, 197, 195, 192, 189, 186, 184, 181, 178, 176, 173,
170, 167, 164, 161, 158, 155, 152, 150, 147, 144, 141, 138, 135, 132, 129, 126, 
123,  121,  118,  115,  113,  110,  107,  104,  102,  99,  97,  95,  92,  90,  88,
86, 85, 83, 82, 81, 80, 79, 79, 79, 80, 81, 82, 83, 85, 87, 89, 93, 96, 100, 106, 115, 133, 314,
318, 321, 323, 325, 326, 328, 329, 330, 331, 331, 332, 332, 332, 333, 333, 333, 333, 333, 333,
332, 332, 332, 331, 331, 330, 330, 329, 328, 327, 326, 325, 324, 322, 321, 319, 317,
315, 313, 310, 307, 304, 300, 296, 291, 285, 279, 273, 266, 257, 248, 239, 230,
222, 215, 208, 203, 199, 195, 192, 191, 188, 187, 185, 184, 183, 182, 181, 181,
181, 181, 182, 182, 183, 185, 187, 189, 192, 195, 199, 203, 207, 213, 218, 224,
230, 235, 241, 245, 249, 252, 254, 254, 253, 253, 252, 252, 251, 250, 250, 249,
248, 247, 246, 244, 243, 241, 239, 237, 235, 233, 230, 227, 223, 219, 215, 208,
202, 194, 184, 171, 157, 143, 133, 122, 112, 103, 97, 92, 87, 83, 79, 76, 72, 70,
68, 65, 63, 61, 59, 57, 55, 54, 53, 52, 50, 49, 48, 47, 47, 46, 45, 44, 44, 43, 42, 42,
41, 41, 41, 40, 40, 40, 39, 39, 39, 39, 39, 39, 38, 38, 38, 38, 39, 39, 39, 39, 39,
40, 40, 40, 41, 41, 42, 43, 44, 45, 46, 47, 49, 50, 53, 55, 58, 62, 68, 77, 337, 336,
336, 335, 334, 333, 331, 330, 328, 327, 325, 322, 320, 317, 315, 313, 310, 306, 302,
298, 294, 289, 284, 279, 273, 265, 257, 249, 241, 233, 224, 214, 204, 194, 184, 175,
166, 157, 150, 143, 136, 131, 126, 122, 118, 114, 111, 108, 105, 103, 101, 99, 97, 96, 95,
94, 93, 92, 92, 91, 91, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 91, 91, 91, 92, 93,
94, 95, 96, 97, 99, 102, 104, 107, 112, 118, 131, 218, 223, 228, 231, 233, 236,
237, 238, 240, 241, 242, 243, 243, 244, 244, 244, 245, 245, 245, 245, 244, 244,
244, 243, 243, 242, 242, 241, 240, 238, 237, 236, 234, 233, 231, 229, 227, 225,
223, 221, 218, 216, 213, 210, 207, 204, 201, 198, 195, 191, 188, 184, 180, 177,
173, 169, 166, 162, 159, 155, 152, 148, 145, 141, 138, 134, 131, 128, 124, 121,
118, 116, 113, 110, 107, 105, 102, 100, 98, 95, 93, 91, 89, 87, 85, 84, 82, 80,
78, 77, 76, 74, 73, 72, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 61, 60, 59, 59,
58, 58, 57, 57, 56, 56, 56, 56, 55, 55, 55, 55, 55, 55, 55, 55, 55, 55, 55, 56,
56, 56, 57, 57, 58, 59, 59, 60, 61, 62, 64, 65, 67, 68, 70, 72, 75, 78, 80, 83,
86, 91, 95, 100, 105, 111, 118, 126, 136, 145, 154, 162, 170, 178, 186, 193, 197,
202, 206, 209, 211, 214, 216, 218, 219, 220, 221, 222, 223, 223, 223, 223, 223,
223, 223, 223, 222, 222, 221, 221, 220, 220, 219, 218, 217, 216, 215, 215, 213,
212, 211, 210, 209, 208, 207, 205, 204, 203, 202, 201, 199, 198, 197, 196, 194,
193, 192, 190, 189, 188, 187, 185, 184, 182, 181, 179, 178, 177, 175, 173, 172,
171, 169, 168, 166
];

var borders = 
[
	{a:{x:0, y:0}, b:{x:canvas.width, y:0}},
	{a:{x:canvas.width, y:0}, b:{x:canvas.width, y:canvas.height}},
	{a:{x:canvas.width, y:canvas.height}, b:{x:0, y:canvas.height}},
	{a:{x:0, y:canvas.height}, b:{x:0, y:0}},
];

window.requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame;

var updateCanvas = true;
function drawLoop()
{
    requestAnimationFrame(drawLoop);
    if(updateCanvas)
    {
    	draw();
    	updateCanvas = false;
    }
}

window.onload = function()
{
	drawLoop();
};

var Mouse =
{
	x: 0,
	y: points[0]
};

canvas.onmousemove = function(event)
{	
	Mouse.x = event.clientX - this.offsetLeft;
	Mouse.y = points[Mouse.x];
	updateCanvas = true;
};
</script>